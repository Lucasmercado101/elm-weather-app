const cacheName="weatherMate-v1",contentToCache=["./index.html","./main.js","./elm.js"];self.addEventListener("activate",e=>{e.waitUntil(self.registration?.navigationPreload.enable())}),self.addEventListener("fetch",n=>{const s=new URL(n.request.url);n.respondWith((async()=>{if(s.hostname.includes("meteo")||s.hostname.includes("openstreetmap")){const a=await fetch(n.request);var e=await a.clone().text(),t=await clients.get(n.clientId);return s.hostname.includes("meteo")?t.postMessage({type:"meteo",data:e}):t.postMessage({type:"address",data:e}),a}t=await caches.match(n.request);if(t)return t;const a=await fetch(n.request);return(await caches.open(cacheName)).put(n.request,a.clone()).catch(e=>{}),a})())}),self.addEventListener("install",e=>{e.waitUntil((async()=>{await(await caches.open(cacheName)).addAll(contentToCache)})())});

const cacheName="weatherMate-v1",contentToCache=["./index.html","./main.js","./elm.js"];self.addEventListener("activate",e=>{e.waitUntil(self.clients.claim()),e.waitUntil(self.registration?.navigationPreload.enable())}),self.addEventListener("fetch",s=>{const n=new URL(s.request.url);s.respondWith((async()=>{if(n.hostname.includes("meteo")||n.hostname.includes("openstreetmap")){const t=await fetch(s.request);const a=await t.clone().text();return await clients.get(s.clientId).then(e=>{if(n.hostname.includes("meteo"))e.postMessage({type:"meteo",data:a});else try{var t=JSON.parse(a);t?.address?.country||t?.address?.city||t?.address?.state?e.postMessage({type:"address",data:a}):e.postMessage({type:"address",data:null})}catch{}}).catch(e=>{}),t}var e=await caches.match(s.request);if(e)return e;const t=await fetch(s.request);return(await caches.open(cacheName)).put(s.request,t.clone()).catch(e=>{}),t})())}),self.addEventListener("install",e=>{e.waitUntil((async()=>{await(await caches.open(cacheName)).addAll(contentToCache).catch(e=>{})})())});